## All schemas in order
SELECT nspname FROM pg_catalog.pg_namespace where nspname not like 'pg_toast%'
and nspname not like 'pg%' order by nspname desc;





## Find objects in database

## Find specific schema
SELECT nspname FROM pg_catalog.pg_namespace order by nspname where nspname like '%rms%';

## List all tables in specific schema
SELECT table_name FROM information_schema.tables WHERE table_schema='td_idwh1_bv_prod_009_pbsdbs_ods';

k

SELECT table_name FROM information_schema.tables 
WHERE table_schema='td_idwh1_bv_prod_009_pbsdbs_ods'
and table_name like 'tf009_vte_ligticcai';


SELECT table_name FROM information_schema.tables 
WHERE table_schema='rms_p009qtzb_rms_ods'
and table_name like '%item_master%';


create role team_ga nologin;
create role "60067299" login;         
grant team_ga to "60067299"; 
grant select on td_idwh1_bv_prod_009_pbsdbs_ods.tf009_vte_ligticcai to team_ga;
grant select on rms_p009qtzb_rms_ods.tf009_vte_ligticcai to team_ga;



SELECT table_catalog, table_schema, table_name, privilege_type
FROM   information_schema.table_privileges 
WHERE  grantee = 'team_ga'

gpstate -b

select * from gp_segment_configuration;
psql -h d-dp-sdw01 -p 10001 -d adb

select gp_segment_id, segno, tupcount, modcount, state from 
pg_aoseg.pg_aocsseg_16527;
 
https://community.pivotal.io/s/article/gpstart-Segment-Error-Failed-to-Connect-Connection-Refused
 PGOPTIONS='-c gp_session_role=utility' psql -d template1 -Atc "copy (select dbid, hostname, port from gp_segment_configuration where role = 'p' and content != -1) to stdout delimiter ' '" | while read dbid host port; do
echo "echo DBID: $dbid"
echo "PGOPTIONS='-c gp_session_role=utility' psql -h $host -p $port -d template1 -c 'select 1;'"
done > test.sh
